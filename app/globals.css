@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

:root {
  /* Blog theme tokens */
  --bg: #ffffff;
  --panel: #fafafa;
  --ink: #222222;
  --muted: #999999;
  --border: #dcdcdc;
  --border-dashed: #a9a9a9;
  --accent: #222222;
  --accent-soft: #f0f0f0;
  --code-bg: #eaeaea;
  --code-block: #212020;

  /* Sidebar tokens */
  --sidebar: hsl(0 0% 98%);
  --sidebar-foreground: hsl(240 5.3% 26.1%);
  --sidebar-primary: hsl(240 5.9% 10%);
  --sidebar-primary-foreground: hsl(0 0% 98%);
  --sidebar-accent: hsl(240 4.8% 95.9%);
  --sidebar-accent-foreground: hsl(240 5.9% 10%);
  --sidebar-border: hsl(220 13% 91%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);

  /* shadcn/ui design tokens */
  --radius: 0.625rem;
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted-ui: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent-ui: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --border-ui: oklch(0.922 0 0);
}

@theme inline {
  /* Blog theme mappings */
  --color-background: var(--bg);
  --color-foreground: var(--ink);
  --font-sans: var(--font-ui);
  --font-mono: var(--font-mono);

  /* Sidebar mappings */
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);

  /* shadcn/ui color mappings */
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted-ui);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent-ui);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-border: var(--border-ui);
  --radius: var(--radius);
}

* {
  scroll-behavior: smooth;
}

body {
  background: var(--bg);
  color: var(--ink);
  font-family: "Inter", "Inter UI", var(--font-ui), -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  letter-spacing: 0.06em;
  font-size: 16px;
  line-height: 1.54;
}

a {
  color: inherit;
  text-decoration: none;
}

a:hover {
  text-decoration: none;
}

/* Links in article body should still underline */
.article-body a:hover {
  text-decoration: underline;
}

::selection {
  background: rgba(0, 0, 0, 0.08);
  color: var(--ink);
}

/* Selection inside code blocks should use light text */
pre::selection,
pre *::selection,
code::selection {
  background: rgba(255, 255, 255, 0.2);
  color: inherit;
}

/* Scoped heading styles - only apply to article/page content, not chat sidebar */
.article-body h1,
.article-body h2,
.article-body h3,
.article-body h4,
.page-shell h1,
.page-shell h2,
.page-shell h3,
.page-shell h4 {
  letter-spacing: 0;
  font-weight: 800;
  color: var(--ink);
  line-height: 1.3;
}

.article-body h1,
.page-shell h1 {
  font-size: 2.625rem;
}

.article-body h2,
.page-shell h2 {
  font-size: 1.625rem;
}

.article-body h3,
.page-shell h3 {
  font-size: 1.375rem;
}

.article-body h4,
.page-shell h4 {
  font-size: 1.125rem;
}

@media (max-width: 684px) {
  .article-body h1,
  .page-shell h1 {
    font-size: 2rem;
  }
  .article-body h2,
  .page-shell h2 {
    font-size: 1.4rem;
  }
  .article-body h3,
  .page-shell h3 {
    font-size: 1.15rem;
  }
}

/* Scoped paragraph styles - only apply to article/page content */
.article-body p,
.page-shell > p {
  color: var(--ink);
  font-size: 16px;
  line-height: 1.54;
  margin: 0 0 1em;
}

.page-shell {
  width: 100%;
  max-width: 840px;
  margin: 0 auto;
  padding: 0 20px 64px;
}

.article-body {
  color: var(--ink);
  font-family: "Inter", "Inter UI", var(--font-ui), -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  line-height: 1.54;
  letter-spacing: 0.06em;
  overflow-x: hidden;
}

.article-body h1,
.article-body h2,
.article-body h3,
.article-body h4 {
  margin: 1.4em 0 0.6em;
}

.article-body p {
  margin: 1em 0;
}

.article-body a {
  text-decoration: underline;
}

.article-body strong {
  font-weight: 700;
}

.article-body em {
  font-style: italic;
}

.article-body code {
  background: var(--code-bg);
  padding: 1px 6px;
  border-radius: 5px;
  font-size: 0.95rem;
  font-family: Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace;
}

.article-body pre {
  background: var(--code-block);
  color: #cccccc;
  padding: 20px;
  border-radius: 8px;
  font-size: 0.95rem;
  overflow: auto;
}

.article-body pre code {
  background: transparent;
  padding: 0;
  color: inherit;
  font-size: inherit;
}

.article-body blockquote {
  position: relative;
  border-left: 2px solid var(--ink);
  margin: 40px;
  padding: 10px 20px;
}

@media (max-width: 684px) {
  .article-body blockquote {
    margin: 10px;
    padding: 10px;
  }
}

.article-body blockquote:before {
  content: "â€";
  font-family: Georgia, serif;
  font-size: 3.875rem;
  position: absolute;
  left: -40px;
  top: -20px;
  color: var(--ink);
}

.article-body ul,
.article-body ol {
  margin: 1em 0 1em 40px;
  padding: 0;
}

@media (max-width: 684px) {
  /* Mobile typography adjustments - following Medium.com standards */
  body {
    font-size: 15px;
    letter-spacing: 0.03em;
    line-height: 1.6;
  }

  .article-body p,
  .page-shell > p {
    font-size: 15px;
    line-height: 1.6;
  }

  .article-body pre {
    font-size: 0.8rem;
    padding: 14px;
  }

  .article-body code {
    font-size: 0.85rem;
  }

  .article-body ul,
  .article-body ol {
    margin-left: 20px;
  }
}

.article-body figure {
  display: table;
  max-width: 100%;
  margin: 25px 0;
}

.article-body figure figcaption {
  font-size: 14px;
  margin-top: 5px;
  opacity: 0.8;
}

.article-body hr {
  width: 100%;
  border: none;
  height: 1px;
  background: var(--border);
}

.flat-card {
  background: var(--panel);
  border-radius: 10px;
  border: 1px solid var(--border);
}

.flat-button {
  background: var(--ink);
  color: var(--bg);
  border-radius: 8px;
  padding: 0.6rem 1.2rem;
  font-weight: 700;
  letter-spacing: 0.04em;
}

/* Syntax highlighting for code blocks (highlight.js classes) */
.hljs {
  color: #abb2bf;
  background: var(--code-block);
}

.hljs-comment,
.hljs-quote {
  color: #5c6370;
  font-style: italic;
}

.hljs-doctag,
.hljs-keyword,
.hljs-formula {
  color: #c678dd;
}

.hljs-section,
.hljs-name,
.hljs-selector-tag,
.hljs-deletion,
.hljs-subst {
  color: #e06c75;
}

.hljs-literal {
  color: #56b6c2;
}

.hljs-string,
.hljs-regexp,
.hljs-addition,
.hljs-attribute,
.hljs-meta .hljs-string {
  color: #98c379;
}

.hljs-attr,
.hljs-variable,
.hljs-template-variable,
.hljs-type,
.hljs-selector-class,
.hljs-selector-attr,
.hljs-selector-pseudo,
.hljs-number {
  color: #d19a66;
}

.hljs-symbol,
.hljs-bullet,
.hljs-link,
.hljs-meta,
.hljs-selector-id,
.hljs-title {
  color: #61aeee;
}

.hljs-built_in,
.hljs-title.class_,
.hljs-class .hljs-title {
  color: #e6c07b;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}

.hljs-link {
  text-decoration: underline;
}


/* Chat sidebar scroll container fix */
/* SidebarContent - prevent scrolling */
.chat-scope[data-sidebar="content"] {
  overflow: hidden !important;
}

/* Conversation (StickToBottom wrapper) - relative positioning context */
.chat-scope [role="log"] {
  position: relative !important;
  flex: 1 !important;
  min-height: 0 !important;
  overflow: hidden !important;
}

/* StickToBottom.Content scrollRef div - absolute fill + scrollable */
.chat-scope [role="log"] > div {
  position: absolute !important;
  inset: 0 !important;
  height: auto !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
}

.dark {
  --sidebar: hsl(240 5.9% 10%);
  --sidebar-foreground: hsl(240 4.8% 95.9%);
  --sidebar-primary: hsl(224.3 76.3% 48%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(240 3.7% 15.9%);
  --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
  --sidebar-border: hsl(240 3.7% 15.9%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

